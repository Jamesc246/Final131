import statsmodels.api as sm
import pandas as pd 
import matplotlib.pyplot as plt
import numpy as np

def get_mvp_status_frame():
   df = pd.read_csv('NBA Finals and MVP.csv', index_col=0)
   mvp_status_counts = df["MVP status"].value_counts()
   mvp_status_df = pd.DataFrame(mvp_status_counts).reset_index()
   mvp_status_df.columns = ["MVP Status", "Count"]
   return mvp_status_df

def plot_mvp_status():
   mvp_status_df = get_mvp_status_frame()
   champion_count = mvp_status_df[mvp_status_df["MVP Status"] == "Champion"]["Count"].sum()
   not_reached_final_count = mvp_status_df[mvp_status_df["MVP Status"] == "Not reached Final"]["Count"].sum()
   labels = ["Champion", "Not reached Final"]
   counts = [champion_count, not_reached_final_count]

   plt.figure(figsize=(8, 6))
   plt.bar(labels, counts, color=["blue", "green"])
   plt.title("MVP Status: Champions vs. Not Reached Final")
   plt.xlabel("MVP Status")
   plt.ylabel("Number of MVPs")
   plt.grid(axis="y", linestyle="--", alpha=0.7)
   plt.tight_layout()
   plt.show()

def get_position_frame():
   df = pd.read_csv('NBA Finals and MVP.csv', index_col = 0)
   player_position = df["MVP Position"].value_counts()
   position_df = pd.DataFrame(player_position.reset_index())
   position_df.columns = ["MVP Position", "Count"]
   return position_df

def plot_player_position():
   position_df = get_position_frame('NBA Finals and MVP.csv')
   center_count = position_df[position_df["MVP Position"] == "Center"]["Count"].sum()
   guard_count = position_df[position_df["MVP Position"] == "Guard"]["Count"].sum()
   forward_count = position_df[position_df["MVP Position"] == "Forward"]["Count"].sum()
   labels = ["Center", "Guard", "Forward"]
   counts = [center_count, guard_count, forward_count]

   plt.figure(figsize=(8, 6))
   plt.bar(labels, counts, color = "blue",)
   plt.title("MVP Position: Center, Guard, Forward")
   plt.xlabel("MVP Position")
   plt.ylabel("Number of MVPs")
   plt.grid(axis="y", linestyle="--", alpha=0.7)
   plt.tight_layout()
   plt.show()

def make_scatter_plot(mvp_status_frame):
   champion_vc = mvp_status_frame[mvp_status_frame["MVP status"].isin(["Champion", "Vice-Champion"])]
   dummy_MVP_status = pd.get_dummies(champion_vc["MVP status"], drop_first=True)
   xs = sm.add_constant(dummy_MVP_status)
   model = sm.OLS(champion_vc["Count"], xs)
   results = model.fit()
   plt.scatter(dummy_MVP_status["Vice-Champion"], champion_vc["Count"], label="Vice-CHampion")
   plt.scatter(dummy_MVP_status["Champion"], champion_vc["Count"], label="Champion")
   plt.xlabel("MVP Status")
   plt.ylabel("Count")
   plt.title("MVP Status Counts")
   plt.show()


def main():
   plot_mvp_status()
   plot_player_position()
   mvp_status_df = get_mvp_status_frame()
   make_scatter_plot(mvp_status_df)

if __name__ == "__main__":
   main()








